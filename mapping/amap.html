<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>AMap Development</title>
    <style type="text/css">
        html,
        body,
        #container {
            width: 100%;
            height: 100%;
            margin: 0px;
            padding: 0px
        }
    </style>
</head>

<body>
    <div id="container"></div>
    <script type="text/javascript">
        window._AMapSecurityConfig = {
            securityJsCode: '<YOUR_CODE>',
        }
    </script>
    <script src="https://webapi.amap.com/loader.js"></script>
    <script type="text/javascript">
        AMapLoader.load({
            "key": "<YOUR_KEY>",
            // "version": "1.4.15", // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
            // "version": "2.0", // 一旦使用2.0版本，geoJSON 即不显示
            // "version": "2.1Beta",
            "plugins": ["AMap.Scale", "AMap.GeoJSON"], // 需要使用的的插件列表，如比例尺'AMap.Scale'等
            "AMapUI": {
                "version": '1.1',
                "plugins": ['overlay/SimpleMarker'], // 需要加载的 AMapUI ui插件
            },
        }).then((AMap) => {
            initializeMap(AMap);
        }).catch((e) => {
            console.error(e);
        });

        function initializeMap(AMap) {
            var map = new AMap.Map('container', {
                resizeEnable: true,
                center: [121.436866, 31.113362], // Xuhui
                // viewMode: '3D',
                zoom: 12
            });
            map.addControl(new AMap.Scale());

            const geojson_1 = { "type": "FeatureCollection", "features": [{ "type": "Feature", "properties": { "adcode": 310104, "name": "徐汇区", "center": [121.43752, 31.179973], "centroid": [121.439405, 31.162992], "childrenNum": 0, "level": "district", "acroutes": [100000, 310000], "parent": { "adcode": 310000 } }, "geometry": { "type": "MultiPolygon", "coordinates": [[[[121.457686, 31.220193], [121.455922, 31.219758], [121.454984, 31.219196], [121.452316, 31.217496], [121.451526, 31.217181], [121.449544, 31.216474], [121.447999, 31.216023], [121.446559, 31.215743], [121.444506, 31.215506], [121.439898, 31.214556], [121.439463, 31.214483], [121.439148, 31.213157], [121.438737, 31.212628], [121.437835, 31.211785], [121.437454, 31.21153], [121.436409, 31.21117], [121.435229, 31.211145], [121.435236, 31.210786], [121.435489, 31.210302], [121.435697, 31.209689], [121.435864, 31.208831], [121.436146, 31.208366], [121.437329, 31.205655], [121.437775, 31.204304], [121.437927, 31.203972], [121.437002, 31.203328], [121.435195, 31.202242], [121.432349, 31.200989], [121.431925, 31.200845], [121.429676, 31.199929], [121.428194, 31.19938], [121.426422, 31.198676], [121.424592, 31.197771], [121.423797, 31.197311], [121.423557, 31.197064], [121.422423, 31.195446], [121.421639, 31.195353], [121.421977, 31.194435], [121.422229, 31.193297], [121.422169, 31.192665], [121.421778, 31.191875], [121.421551, 31.191606], [121.420754, 31.191079], [121.419713, 31.190797], [121.416651, 31.190957], [121.416704, 31.191978], [121.416912, 31.192402], [121.416191, 31.192428], [121.416044, 31.191574], [121.414968, 31.1916], [121.414916, 31.191009], [121.41257, 31.191118], [121.412643, 31.190417], [121.412502, 31.189414], [121.412554, 31.188624], [121.412962, 31.187646], [121.413553, 31.186836], [121.415254, 31.18736], [121.415774, 31.185816], [121.415757, 31.185594], [121.415417, 31.185247], [121.415392, 31.184824], [121.415159, 31.183396], [121.413986, 31.183461], [121.414012, 31.183146], [121.412754, 31.183151], [121.412963, 31.182283], [121.412121, 31.182196], [121.411461, 31.182034], [121.4043, 31.179988], [121.400097, 31.178808], [121.398682, 31.179758], [121.398352, 31.179904], [121.397692, 31.179574], [121.398127, 31.178901], [121.398177, 31.178545], [121.398074, 31.178228], [121.396658, 31.177892], [121.395764, 31.177839], [121.394447, 31.177879], [121.394774, 31.176631], [121.395422, 31.174593], [121.394626, 31.174509], [121.394764, 31.174023], [121.394486, 31.173949], [121.394469, 31.173536], [121.392696, 31.173086], [121.393114, 31.171378], [121.39367, 31.171434], [121.393931, 31.170427], [121.393765, 31.17036], [121.394052, 31.169493], [121.391507, 31.168691], [121.392913, 31.164587], [121.394573, 31.159605], [121.398915, 31.160768], [121.400642, 31.16139], [121.40264, 31.162232], [121.404574, 31.15759], [121.403016, 31.157108], [121.402126, 31.156893], [121.401866, 31.157532], [121.395871, 31.155855], [121.396937, 31.152685], [121.397093, 31.152631], [121.40145, 31.153774], [121.400974, 31.155215], [121.402325, 31.155639], [121.404145, 31.156417], [121.404948, 31.156692], [121.409089, 31.146915], [121.409041, 31.146689], [121.409306, 31.146212], [121.411294, 31.141743], [121.411874, 31.140753], [121.412949, 31.138701], [121.413809, 31.137283], [121.414711, 31.136021], [121.415121, 31.135616], [121.416133, 31.134381], [121.418398, 31.131669], [121.421521, 31.127131], [121.429394, 31.128099], [121.436503, 31.129051], [121.436628, 31.12856], [121.43698, 31.128171], [121.43685, 31.127659], [121.437706, 31.12442], [121.438272, 31.122622], [121.438003, 31.122309], [121.438066, 31.121949], [121.438537, 31.121731], [121.438935, 31.119663], [121.438838, 31.119107], [121.437972, 31.117579], [121.435733, 31.113542], [121.436302, 31.113092], [121.436866, 31.113362], [121.436996, 31.113315], [121.437836, 31.112614], [121.438002, 31.112103], [121.439413, 31.112066], [121.441545, 31.112571], [121.442516, 31.113102], [121.444474, 31.114292], [121.445782, 31.114953], [121.445938, 31.115423], [121.446631, 31.11425], [121.448729, 31.115006], [121.44939
            let geojson = new AMap.GeoJSON({
                geoJSON: geojson_1,
                // Also: getMarker, getPolyline
                getPolygon: function (geojson, lnglats) {
                    var area = AMap.GeometryUtil.ringArea(lnglats[0]);
                    return new AMap.Polygon({
                        path: lnglats,
                        fillOpacity: 1 - Math.sqrt(area / 8000000000),
                        strokeColor: "rgba(190, 161, 58, 0.75)",
                        fillColor: "rgba(151, 255, 255, .75)",
                        strokeWeight: 2,
                    });
                },
            });
            geojson.setMap(map);

            // Test line.
            const line1 = [[120.0472280697, 30.5885644383], [120.0472177644, 30.5886191267], [120.04721982611974, 30.58861942161456], [120.0472301314, 30.5885647332], [120.0472280697, 30.5885644383]];
            polyline1 = new AMap.Polyline(
                {
                    path: line1,
                    strokeColor: "black",
                    strokeOpacity: 0.75,
                    strokeWeight: 1,
                    strokeStyle: "dashed",
                    // strokeDasharray: [10, 5],
                    lineJoin: "round",
                    lineCap: "square",
                }
            );
            polyline1.setMap(map);
            console.log(polyline1.getLength());
        }
    </script>
</body>

</html>
